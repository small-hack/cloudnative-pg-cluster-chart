# cnpg-cluster

![Version: 1.0.0](https://img.shields.io/badge/Version-1.0.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square)

Create postgres tenant clusters managed by the CNPG Operator

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| cloudymax |  | <https://cloudydev.net> |
| jessebot |  | <https://jessebot.work> |

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| https://cloudnative-pg.github.io/charts | cnpgCluster(cluster) | 0.5.0 |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| certificates.client.clientCASecret | string | `""` | name of existing Kubernetes Secret for the postgresql client Certificate Authority cert, ignored if certificates.generate is true |
| certificates.client.enabled | bool | `false` | enable using client certificates |
| certificates.client.generate | bool | `false` | generate client certs using cert-manager. if true the following are ignored: certificates.clientCASecret, certificates.replicationTLSSecret |
| certificates.client.replicationTLSSecret | string | `""` | name of existing Kubernetes Secret for the postgresql replication TLS cert ignored if certificates.generate is true |
| certificates.server.enabled | bool | `false` | enable using server certificates |
| certificates.server.generate | bool | `false` | generate server certs using cert-manager. if true the following are ignored: certificates.serverTLSSecret, certificates.serverCASecret |
| certificates.server.serverCASecret | string | `""` | name of existing Kubernetes Secret for the postgresql server Certificate Authority cert, ignored if certificates.generate is true |
| certificates.server.serverTLSSecret | string | `""` | name of existing Kubernetes Secret for the postgresql server TLS cert, ignored if certificates.generate is true |
| certificates.user.enabled | bool | `false` | create a certificate for a user to connect to postgres using CertManager requires server and client certificate generation enabled |
| certificates.user.username | list | `["app"]` | List of names of users to create a cert for, eg: the DbOwner specified earlier. This data populated into the commonName field of the certificate. |
| cnpgCluster.additionalEnv[0].name | string | `"AWS_REQUEST_CHECKSUM_CALCULATION"` |  |
| cnpgCluster.additionalEnv[0].value | string | `"when_required"` |  |
| cnpgCluster.additionalEnv[1].name | string | `"AWS_RESPONSE_CHECKSUM_VALIDATION"` |  |
| cnpgCluster.additionalEnv[1].value | string | `"when_required"` |  |
| cnpgCluster.certificates | object | `{}` | see: https://cloudnative-pg.io/docs/1.28/certificates#client-certificate |
| cnpgCluster.cluster.instances | int | `3` | Number of instances |
| cnpgCluster.enabled | bool | `false` | enable this to deploy the official CNPG cluster helm chart dep All other values here are passed directly to the their chart. See: https://github.com/cloudnative-pg/charts/blob/main/charts/cluster/values.yaml |
| cnpgCluster.mode | string | `"standalone"` |  |
| cnpgCluster.postgresql.pg_hba | list | `["hostnossl all all 0.0.0.0/0 reject","hostssl all all 0.0.0.0/0 cert clientcert=verify-full"]` | records for the pg_hba.conf file. ref: https://www.postgresql.org/docs/current/auth-pg-hba-conf.html |
| cnpgCluster.primaryUpdateStrategy | string | `"unsupervised"` |  |
| cnpgCluster.type | string | `"postgresql"` |  |
| cnpgCluster.version.postgresql | string | `"16"` |  |
| name | string | `"app-postgres"` | name to use for templating certs |
| testApp.enabled | bool | `false` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
